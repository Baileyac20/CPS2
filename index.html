<html>

	<head>
		<title>CPS - 2</title>
		<script>
			var settingsMs
			var Button
			var Display
			var Clicks = 0
			var Done = false
			var Status
			document.addEventListener("DOMContentLoaded", function() {
		
		
				// Highscore.
				if(!localStorage.getItem("hhighscore")) {
					localStorage.setItem("hhighscore",0)
				}
				document.getElementById("highscore").innerHTML = localStorage.getItem("hhighscore")
				document.getElementById("clear").onclick = function() {
					localStorage.setItem("hhighscore",0)
					location.reload();
				}
		
				settingsMs = document.getElementById("settingsMs");
				Button = document.getElementById("button");
				Display = document.getElementById("display");
				Status = document.getElementById("status");
				Button.onclick = function() {
					if(Done) {
						return
					}
					var TIME = parseInt(settingsMs.value);
					if(Clicks==0) {
						setTimeout(function() {
							Done = true
							if(Clicks>localStorage.getItem("hhighscore")) {
								localStorage.setItem("hhighscore",Clicks)
								document.getElementById("highscore").innerHTML = Clicks;
								alert("New Highscore!");
							}
							Clicks = 0
							Status.innerHTML = `
							<a onclick="reset()"><h3 style="text-align: center; color: green;">Click To Reset</h3></a>
							`
						}, TIME);
						Status.innerHTML = "<h3 style='text-align: center;'>In Progress</h3>";
					}
					Clicks=Clicks+1
					Display.innerHTML = Clicks
				}
			
			});	
			function reset() {
				Status.innerHTML = `
				<h3 style="text-align: center;"> Waiting For Input </h3>
				`
				Done = false
				Display.innerHTML = 0
			}
		</script>
		<style>
		body {
			background-color: #23272a;
			color: #FFFFFF;
		}
		#button {
			background-color: #7289da;
			width: 100%;
			height: 80%;
			color: #FFFFFF;
			border: none;
		}
		#status {
			background-color: #2c2f33;
		}
		</style>
	</head>
	<body>
		<h1 style="text-align: center;"> CPS TEST [2] </h1>
		<button id="button">
		<h1 id="display">
		 0
		</h1>
		</button>
		<div id="status">
		<h3 style="text-align: center;"> Waiting For Input </h3>
		</div>
		<hr>
		<h3>- Settings<h3>
		<input id="settingsMs" value="1000"> MS
		<hr>
		<h3>- Your Highscore</h3>
		<code id="highscore">LOADING</code> <a id="clear" style="color: red;">[Clear]</a><br>
		<hr>
		<p>
		CPS Test [2] was made by Alex.<br>
		Your score may be influenced by variables such as computer speed and mouse efficiency. 
		</p>
		
	</body>

</html>